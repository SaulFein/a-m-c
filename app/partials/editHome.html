<section class="row">
    <div ng-cloak class=" col-md-8 col-md-offset-2" ng-init="checkToken(); retrieveHomeDataFromApi();">
        <div ng-cloak class=" col-md-8 col-md-offset-2">

        <div class="panel panel-default">
            <div class="panel-heading">
                <h2 class="panel-title text-center">
                  <span class="glyphicon .glyphicon-list"></span> Edit Home
                </h2>
            </div>
            <div class="panel panel-default">
                <div class="rtn-inventory">
                    <a id="logout" class="no-style-link" href='#/admin-inventory'> <button type="button" class="btn btn-primary top-panel-btns"><span class= "glyphicon glyphicon-arrow-left"></span> ADMIN  </button></a>
                </div>
                <div class="clearfix"></div>
            </div>

            <div class="panel-body">
                <!-- The form to add cars information-->
               <form name="addForm" novalidate>
                <p>*1 Main Collage Photo and 8 Collage photos required</p>
                    <div class="col-md-6">
                        <div class="form-group">

                            <label for="save/update"></label>
                            <button type="submit" class="btn btn-info btn-block update-btn" style="width: 200px" ng-disabled="loadingHome" ng-click="createHome();" >Save / Update</button>
                        </div>

                        <!-- <div class="form-group">

                            <label for="save/update"></label>
                            <button type="submit" class="btn btn-info btn-block update-btn" style="width: 200px" ng-disabled="loadingHome" ng-click="deleteHome(home);" >Delete</button>
                        </div> -->
                      
                    </div>
<!-- 
                    <div class="col-md-12 col-lg-12 col-sm-12">
                        <div class="form-group">
                            <label for="description">Home Introduction / Description</label>
                            <textarea type="text" style="min-height: 150px;" class="form-control" placeholder="Description" ng-model="home.description"></textarea>
                        </div>
                    </div> -->
                    <div class="col-md-12 col-lg-12 col-sm-12">

                        <div class="form-group">
                            <label for="picture">Main Collage photo</label>
                            <div class="text-center">
                                <button type="button" class="btn btn-primary" ng-click="uploadAndUp(home)"> <span class= "glyphicon glyphicon-upload"></span>
                                  UPLOAD <span class="caret"></span>
                                </button>
                                <div style="margin-top:10px;">
                                    <!-- Show the thumbnail only when the picture is uploaded -->
                                    <div ng-if="home.picture">
                                        <!-- the picture is rendered with width: 500 and sharpened -->
                                        <img style="width:300px" ng-src="{{home.picture.url | fpConvert: {filter:'sharpen'} }}">
                                    </div>
                                    <button type="button" ng-if="home.picture" class="btn btn-danger" style="margin-top: 15px;" data-toggle="modal" data-target="#confirm-modal-main">
                                      <span class= "glyphicon glyphicon-remove-circle"></span>
                                      REMOVE IMAGE
                                    </button>

                                    <!-- Modal -->
                                    <div id="confirm-modal-main" class="modal fade" role="dialog">
                                        <div class="modal-dialog">

                                            <!-- Modal content-->
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                    <h4 class="modal-title">Remove Image Confirmation</h4>
                                                </div>
                                                <div class="modal-body">
                                                    <p>Are you sure you want to delete this image?</p>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-danger" data-ng-click="removeImage(home)" data-dismiss="modal">REMOVE</button>
                                                    <button type="button" class="btn btn-default" data-dismiss="modal">CANCEL</button>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <!--<button type="button" class="btn btn-danger" data-ng-click="removeImage(car)"> <span class= "glyphicon glyphicon-remove-circle"></span> REMOVE IMAGE</button>-->
                                </div>
                            </div>
                        </div>
                        <hr>
                    </div>
                    <div class="col-md-12 col-lg-12 col-sm-12" style="margin-bottom: 18px">
                        <div class="form-group" style="border-bottom: none;">
                            <label for="picture">Collage Photos</label>
                            <div class="text-center">
                                <div class="ul-mult-btn">
                                    <button ng-if="true" type="button" class="btn btn-primary" ng-click="uploadMultipleAndUp(data)">
                                      <span class= "glyphicon glyphicon-upload"></span> UPLOAD <span class="caret"></span>
                                    </button>
                                    <button ng-if="validateUpload() === false" type="button" class="btn btn-primary" data-toggle="modal" data-target="#upload-modal-warning"><span class= "glyphicon glyphicon-upload"></span>
                                      UPLOAD <span class="caret"></span>
                                    </button>
                                </div>
                                <!-- Show the thumbanil of more pictures -->
                                <div ui-sortable="sortableOptions" style="display: flex; flex-wrap: wrap" ng-model="home.morePictures">
                                    <div style="margin-top:10px; margin-right:10px;" ng-repeat="picture in home.morePictures">
                                        <div style="height: 175px;">
                                            <div>
                                                <div style="height: 117px; overflow:hidden">
                                                    <img style="width: 175px; padding-top: 20px; padding-bottom: 10px;" ng-src="{{picture.url | fpConvert: {filter:'sharpen'} }}">
                                                </div>
                                                <br>
                                                <button type="button" class="btn btn-danger" ng-click="setSelected($index)" data-toggle="modal" data-target="#confirm-modal-more"> <span class= "glyphicon glyphicon-remove-circle"></span> REMOVE IMAGE</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </form>
            </div>
        </div>
    </div>
</section>

<!-- <div id="upload-modal-warning" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Please specify the make, model and year of the car before uploading images and files.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">CLOSE</button>
            </div>
        </div>

    </div>
</div> -->

<div id="confirm-modal-more" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Remove Image Confirmation</h4>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this image?</p>
            </div>
            <div class="modal-footer">
                <!-- <button type="button" class="btn btn-danger"  data-ng-click="removeMoreImage(picture.url, car)">REMOVE</button> -->
                <button type="button" class="btn btn-danger" data-ng-click="removeMoreImage(home);">REMOVE</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">CANCEL</button>
            </div>
        </div>

    </div>
</div>
